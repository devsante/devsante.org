$header_vertical_spacing: 1rem;

$header_menu_height: 2.5rem;

$header_logo_height_smartphone: 1.2rem;
$header_logo_height_tablet_desktop: 2.8rem;

$header_height_smartphone: $header_logo_height_smartphone + 7/4 * $header_vertical_spacing; // cf. vertical margins for .logo
$header_height_tablet_desktop: $header_menu_height + $header_logo_height_tablet_desktop + 2 * $header_vertical_spacing * 1.5;

$search_box_height: $header_menu_height;

$top_height_smartphone: $header_height_smartphone + $search_box_height + 0.0625rem; // 0.0625 = 1 px @ 1rem = 16px, added because of rounding issues
$top_height_tablet_desktop: $header_height_tablet_desktop + $search_box_height + 0.0625rem; // 0.0625 = 1 px @ 1rem = 16px, added because of rounding issues


@import "../../../site/patterns/menu-icon/menu-icon";
@import "../../../site/patterns/menu/menu";
@import "search";

body, html {
  .navigation-open {
    overflow: hidden;
    // Fix iOS
    // position: fixed; // causes page to scroll back up
  }
}

.header-search {
  position: fixed;
  top: 0;
  width: 100%;
  transition: 0.4s;

  &.headroom--unpinned {
    transform: translate3d(0, - $top_height_smartphone, 0);
    @include breakpoint ($tablet) {
      transform: translate3d(0, - $header_menu_height, 0);
    }
  }
}

header {

  color: #ffffff;
  background-color: $dark_blue;
  overflow: hidden; //prevent collapsing margin between child and parent

  @include breakpoint($smartphone_only) {
    // height: $header_height_smartphone;

    .menu-overlay {
      position: fixed;
      z-index: 1; // fix Algolia input going over the overlay
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: $light_grey;
      opacity: 0;
      visibility: hidden;
      transition: 0.5s;

      &.visible {
        @include visible(0.9);
      }
    }
  }

  .logo {
    margin: $header_vertical_spacing * 3/4 0 $header_vertical_spacing;
    height: $header_logo_height_smartphone;

    @include breakpoint (max-width 359px) {
      margin-left: $container_padding;
    }

    @include breakpoint($tablet) {
      margin: $header_vertical_spacing * 1.5 0;
      height: $header_logo_height_tablet_desktop;
      text-align: center;
    }

    a, img {
      @include breakpoint(360px) {
        display: block;
        margin: 0 auto;
      }
      height: inherit;
    }
  }
}

@include breakpoint($tablet) {
  body.home header .logo {
    margin: 2rem 0 1.5rem;
    // height: 4.5rem;
  }
}

#baseline {
  width: 10rem;
  margin: 0 auto;
  margin-bottom: 1.2rem;
  text-transform: uppercase;
  text-align: center;
  font-size: 0.7rem;

  @include breakpoint($tablet) {
    width: 100%;
    font-size: 1.1rem;
    margin-bottom: 2.8rem;
  }
}
